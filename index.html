<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Trivia RomÃ¡ntica</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; height:100vh; text-align:center; background-size:cover; background-position:center; background-repeat:no-repeat; display:flex; justify-content:center; align-items:center; }
    /* Pantallas */
    #start-screen, #pre-final, #quiz-container { position:absolute; top:0; left:0; width:100%; height:100%; background-size:cover; background-position:center; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    #pre-final, #quiz-container { background:rgba(255,255,255,0.95); }
    /* Ocultar inicialmente */
    #pre-final, #quiz-container { visibility:hidden; }
    /* Inicio */
    #start-screen { background-image:url('inicio.png'); }
    #start-screen h2 { margin-top:100px; color:#333; margin-bottom:20px; font-size:2em; }
    #start-screen input { padding:10px; font-size:16px; width:200px; margin-bottom:20px; border:1px solid #ccc; border-radius:5px; }
    #start-screen button { padding:12px 24px; font-size:16px; background-color:#ff66a3; color:white; border:none; border-radius:8px; cursor:pointer; }
    #start-screen button:hover { background-color:#cc4078; }
    /* Pre-final */
    #pre-final h2 { font-size:1.2em; color:#333; margin:0 20px; }
    #pre-final button { margin-top:20px; padding:12px 24px; font-size:16px; background-color:#ff66a3; color:white; border:none; border-radius:8px; cursor:pointer; }
    #pre-final button:hover { background-color:#cc4078; }
    /* Trivia */
    #quiz-container h2 { color:#d0005f; margin-bottom:10px; }
    #feedback { font-size:1em; color:#333; margin-bottom:15px; min-height:1.2em; }
    #answers { display:grid; grid-template-columns:1fr 1fr; gap:15px; width:80%; }
    button.answer { width:100%; background-color:#ff66a3; border:none; color:white; padding:12px; font-size:16px; border-radius:8px; cursor:pointer; text-align:left; }
    button.answer:hover { background-color:#cc4078; }
    .hearts { font-size:40px; animation:float 1s ease-in-out infinite; }
    @keyframes float {0%{transform:translateY(0);}50%{transform:translateY(-10px);}100%{transform:translateY(0);} }
  </style>
</head>
<body>
  <audio id="bg-music" loop></audio>
  <div id="start-screen">
    <h2>Bienvenido a la ANITRIVIA</h2>
    <input id="username" type="text" placeholder="Ingresa tu nombre" />
    <button id="start-btn">Iniciar Trivia</button>
  </div>
  <div id="pre-final">
    <h2 id="pre-text"></h2>
    <button id="pre-btn">Continuar</button>
  </div>
  <div id="quiz-container">
    <h2 id="question"></h2>
    <div id="feedback"></div>
    <div id="answers"></div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const letters = ['a)', 'b)', 'c)', 'd)'];
      const messages = ['Â¡Bien hecho, {name}! ğŸ‰','Â¡Excelente, {name}! âœ¨','Â¡Sigue asÃ­, {name}! ğŸ‘','Â¡Muy bien, {name}! ğŸ˜Š'];
      const questions = [
        { q:"Â¿CuÃ¡ntos pokÃ©mons son de la primera generaciÃ³n?", options:["101","152","151","11"], answer:2 },
        { q:"Â¿QuiÃ©n es Haku en la pelÃ­cula 'El viaje de Chihiro'?", options:["El espÃ­ritu que salvÃ³ a Chihiro","El padre de Chihiro","La mascota de Chihiro","Ninguna de las anteriores"], answer:0 },
        { q:"Â¿QuiÃ©n es el amor verdadero de Uzumaki Naruto?", options:["Haruno Sakura","Hyuga Hinata","Nara Temari","Uchiha Sasuke"], answer:1 },
        { q:"En 'Los diarios de la boticaria', Â¿de quÃ© color son los ojos de Maomao?", options:["Negros","Azules","Verdes","Violetas"], answer:1 },
        { q:"En 'Kimetsu no Yaiba', Â¿cuÃ¡ntos pilares existen?", options:["5","7","8","9"], answer:3 },
        { q:"Â¿CuÃ¡l es el apellido de Sakura Cardcaptor?", options:["Ackerman","Haruno","Saotome","Kinomoto"], answer:3 },
        { q:"Â¿Quieres pololear conmigo? ğŸ’™", options:["SÃ­","YES or Yes","Obvio que si ctmmm","Todas las anteriores"], answer:3 }
      ];
      const audio = document.getElementById('bg-music');
      const startScreen = document.getElementById('start-screen');
      const quizContainer = document.getElementById('quiz-container');
      const preFinal = document.getElementById('pre-final');
      const feedbackEl = document.getElementById('feedback');
      let current = 0;
      let username = '';

      document.getElementById('start-btn').onclick = () => {
        const nameField = document.getElementById('username');
        if (!nameField.value.trim()) { alert('Por favor ingresa tu nombre'); return; }
        username = nameField.value.trim();
        audio.src = 'naruto.mp3'; audio.play().catch(() => {});
        startScreen.style.visibility = 'hidden';
        quizContainer.style.visibility = 'visible';
        loadQuestion();
      };

      document.getElementById('pre-btn').onclick = () => {
        preFinal.style.visibility = 'hidden';
        quizContainer.style.visibility = 'visible';
        current++;
        loadQuestion();
      };

      function loadQuestion() {
        // Solo naruto antes de penÃºltima
        if (current < 5) {
          if (!audio.src.includes('naruto.mp3')) { audio.src = 'naruto.mp3'; audio.play().catch(() => {}); }
        }
        const q = questions[current];
        document.getElementById('question').textContent = q.q;
        document.body.style.backgroundImage = `url('fondo${current+1}.png')`;
        feedbackEl.textContent = '';
        const answersDiv = document.getElementById('answers');
        answersDiv.innerHTML = '';

        q.options.forEach((opt, idx) => {
          const btn = document.createElement('button');
          btn.className = 'answer';
          btn.textContent = `${letters[idx]} ${opt}`;
          btn.onclick = () => {
            if (idx === q.answer) {
              feedbackEl.textContent = messages[current % messages.length].replace('{name}', username);
              if (current === 5) {
                setTimeout(() => {
                  audio.src = 'iwonder.mp3'; audio.play().catch(() => {});
                  document.getElementById('pre-text').textContent = 
                    `Ahora viene la Ãºltima y mÃ¡s importante pregunta, ${username}. Â¡Te enviamos todo el KI ğŸ‰, CHAKRA ğŸŒ€, NEN ğŸŒ±, HAKI ğŸ’¥, COSMO ğŸŒŸ, MANA ğŸ”®, STANDS ğŸ‘Š, AURA ğŸŒˆ y sobre todo AMOR ğŸ’™ del mundo ğŸ™Œ!!`;
                  quizContainer.style.visibility = 'hidden'; preFinal.style.visibility = 'visible';
                }, 1000);
              } else {
                current++;
                setTimeout(() => { current < questions.length ? loadQuestion() : showFinal(); }, 1000);
              }
            } else {
              alert(`Â¡Oops, ${username}! Esa no es la respuesta correcta ğŸ’”`);
            }
          };
          answersDiv.appendChild(btn);
        });
      }

      function showFinal() {
        // Desde Ãºltima pregunta en adelante, solo iwonder
        if (!audio.src.includes('iwonder.mp3')) { audio.src = 'iwonder.mp3'; audio.play().catch(() => {}); }
        quizContainer.innerHTML = '<h2>ğŸ’– Â¡Siii! ğŸ’–</h2><div class="hearts">ğŸ’—ğŸ’“ğŸ’ğŸ’•ğŸ’˜ğŸ’ğŸ’–</div>';
        quizContainer.style.visibility = 'visible';
      }
    });
  </script>
</body>
</html>
